<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Juego de Memoria — César Vallejo</title>
  <style>
    :root{--bg:#0f1724;--card:#ffffff;--accent:#f59e0b;--muted:#94a3b8}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:linear-gradient(180deg,#071129 0%, #0f1724 100%);color:var(--card);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .wrap{width:100%;max-width:980px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:1.25rem;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--card);padding:8px 12px;border-radius:10px;cursor:pointer}
    .status{display:flex;gap:12px;align-items:center;font-size:0.95rem;color:var(--muted)}
    .board{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;background:rgba(255,255,255,0.03);padding:14px;border-radius:12px}
    .card{position:relative;padding-top:100%;border-radius:10px;perspective:800px;cursor:pointer}
    .inner{position:absolute;inset:0;border-radius:10px;transition:transform .45s;transform-style:preserve-3d}
    .card.flipped .inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:12px;border-radius:10px}
    .front{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.04);transform:rotateY(180deg);color:#071129;font-weight:600}
    .back{background:linear-gradient(180deg,var(--accent),#ef4444);color:#071129;font-weight:700}
    .small{font-size:0.8rem;color:var(--muted)}
    .footer{margin-top:12px;color:var(--muted);font-size:0.9rem}
    @media (max-width:600px){.board{grid-template-columns:repeat(3,1fr)}}
    /* celebration */
    .celebrate{position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Memoria: Vida y Obras de <span style="color:var(--accent)">César Vallejo</span></h1>
      <div class="controls">
        <div class="status">
          <div id="moves">Movimientos: 0</div>
          <div id="time">Tiempo: 00:00</div>
          <div id="score">Pares: 0/8</div>
        </div>
        <button id="restart">Reiniciar</button>
        <button id="hint">Pista</button>
      </div>
    </header>

    <div id="board" class="board" aria-live="polite"></div>

    <div class="footer">
      Objetivo: Encuentra las parejas que relacionan hechos, obras y fechas importantes sobre César Vallejo. Usa la pista si necesitas ayuda. ¡Aprende mientras juegas!
    </div>
  </div>

  <template id="card-template">
    <div class="card" tabindex="0" role="button">
      <div class="inner">
        <div class="face back"></div>
        <div class="face front"></div>
      </div>
    </div>
  </template>

  <script>
    // Datos: 8 parejas (termino - pareja)
    const pairs = [
      ["Nacimiento: 1892", "Nació en Santiago de Chuco, Perú (16 mar 1892)"] ,
      ["Los Heraldos Negros", "Primer libro de poemas (1919)"] ,
      ["Trilce", "Obra vanguardista publicada en 1922"] ,
      ["Poemas Humanos", "Colección póstuma publicada en 1939"] ,
      ["Temas", "Experimentación lingüística y compromiso social"] ,
      ["Exilio y París", "Vivió en Europa; murió en París en 1938"] ,
      ["Legado", "Considerado uno de los más grandes poetas peruanos"] ,
      ["Estilo", "Ruptura formal, neologismos y fuerte carga emotiva"]
    ];

    // Genera cartas mezcladas: cada par se separa en dos cartas con la misma clave
    const cardsData = [];
    pairs.forEach((p, i) => {
      const id = 'p' + i;
      cardsData.push({id, text: p[0]});
      cardsData.push({id, text: p[1]});
    });

    // shuffle
    function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
    shuffle(cardsData);

    // estado
    const board = document.getElementById('board');
    const template = document.getElementById('card-template');
    let first = null, second = null; let lock=false; let moves=0; let matched=0;
    let seconds=0; let timerInterval=null;

    function formatTime(s){const mm=Math.floor(s/60).toString().padStart(2,'0'); const ss=(s%60).toString().padStart(2,'0'); return mm+':'+ss}

    function startTimer(){ if(timerInterval) return; timerInterval = setInterval(()=>{seconds++; document.getElementById('time').textContent = 'Tiempo: '+formatTime(seconds)},1000)}
    function stopTimer(){ clearInterval(timerInterval); timerInterval=null }

    // crea tablero
    function renderBoard(){ board.innerHTML=''; cardsData.forEach((c,idx)=>{
      const node = template.content.firstElementChild.cloneNode(true);
      node.dataset.id = c.id; node.dataset.idx = idx;
      node.querySelector('.back').textContent = 'Vallejo';
      node.querySelector('.front').textContent = c.text;
      node.addEventListener('click', onCardClick);
      node.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); node.click(); } });
      board.appendChild(node);
    })}

    function onCardClick(e){
      const card = e.currentTarget; if(lock) return; if(card.classList.contains('flipped')) return;
      if(!timerInterval) startTimer();
      card.classList.add('flipped');
      if(!first){ first = card; return }
      second = card; lock = true; moves++; updateStatus();
      const match = first.dataset.id === second.dataset.id;
      setTimeout(()=>{
        if(match){ first.style.visibility='hidden'; second.style.visibility='hidden'; matched++; document.getElementById('score').textContent = `Pares: ${matched}/${pairs.length}`; celebrateIfDone(); }
        else { first.classList.remove('flipped'); second.classList.remove('flipped'); }
        first = null; second = null; lock = false;
      }, 800);
    }

    function updateStatus(){ document.getElementById('moves').textContent = 'Movimientos: '+moves }

    function celebrateIfDone(){ if(matched === pairs.length){ stopTimer(); setTimeout(()=>{ alert('¡Felicidades! Has encontrado todas las parejas.\nTiempo: '+formatTime(seconds)+' | Movimientos: '+moves); },200) }}

    document.getElementById('restart').addEventListener('click', ()=>{
      // reset
      shuffle(cardsData); matched=0; moves=0; seconds=0; first=null; second=null; lock=false; stopTimer(); document.getElementById('moves').textContent='Movimientos: 0'; document.getElementById('time').textContent='Tiempo: 00:00'; document.getElementById('score').textContent = `Pares: 0/${pairs.length}`; renderBoard();
    });

    document.getElementById('hint').addEventListener('click', ()=>{
      if(lock) return; // evita abuso
      // muestra una pareja correcta por 1.2s
      const unseen = Array.from(board.querySelectorAll('.card')).filter(c=>!c.classList.contains('flipped') && c.style.visibility!=='hidden');
      if(unseen.length < 2) return;
      // encuentra una pareja entre unseen
      const map = {};
      for(const c of unseen){ map[c.dataset.id] = map[c.dataset.id] || []; map[c.dataset.id].push(c) }
      const pairEntry = Object.values(map).find(arr=>arr.length===2);
      if(pairEntry){ pairEntry[0].classList.add('flipped'); pairEntry[1].classList.add('flipped'); setTimeout(()=>{ pairEntry[0].classList.remove('flipped'); pairEntry[1].classList.remove('flipped'); },1200) }
      else { // si no hay pares obvios (raro), voltea dos al azar
        const [a,b] = shuffle(unseen).slice(0,2);
        a.classList.add('flipped'); b.classList.add('flipped'); setTimeout(()=>{ a.classList.remove('flipped'); b.classList.remove('flipped'); },1200);
      }
    });

    // inicio
    renderBoard();
  </script>
</body>
</html>